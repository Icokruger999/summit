{
  "commands": [
    "cd /tmp && rm -rf summit && git clone https://github.com/Icokruger999/summit.git",
    "cd summit/backend && sudo mkdir -p /var/www/summit && sudo cp -r * /var/www/summit/",
    "cd /var/www/summit && sudo npm install --production --legacy-peer-deps",
    "if [ ! -f .env ]; then JWT_SECRET=$(openssl rand -base64 32) && echo -e \"PORT=4000\\nNODE_ENV=production\\nDB_HOST=codingeverest-new.cl4qcomc6fj0.eu-west-1.rds.amazonaws.com\\nDB_PORT=5432\\nDB_NAME=Summit\\nDB_USER=postgres\\nDB_PASSWORD=Stacey1122\\nJWT_SECRET=$JWT_SECRET\\nCORS_ORIGIN=https://summit.codingeverest.com,https://www.codingeverest.com\\nLIVEKIT_API_KEY=devkey\\nLIVEKIT_API_SECRET=devsecret\\nLIVEKIT_URL=wss://livekit.codingeverest.com\" > .env; fi",
    "sudo mkdir -p uploads",
    "sudo pm2 stop summit-backend || true",
    "sudo pm2 delete summit-backend || true",
    "sudo pm2 start dist/index.js --name summit-backend",
    "sudo pm2 save",
    "sleep 3",
    "curl http://localhost:4000/health",
    "sudo pm2 list"
  ]
}

