{
  "commands": [
    "echo '=== Updating CORS to include summit.codingeverest.com ==='",
    "cd /var/www/summit/server",
    "echo ''",
    "echo 'Step 1: Check current CORS_ORIGIN'",
    "grep CORS_ORIGIN .env 2>/dev/null || echo 'CORS_ORIGIN not found'",
    "echo ''",
    "echo 'Step 2: Update CORS_ORIGIN to include summit.codingeverest.com'",
    "if grep -q 'CORS_ORIGIN' .env; then",
    "  sed -i 's|CORS_ORIGIN=.*|CORS_ORIGIN=http://localhost:5173,https://www.codingeverest.com,https://codingeverest.com,https://summit.codingeverest.com|' .env",
    "else",
    "  echo 'CORS_ORIGIN=http://localhost:5173,https://www.codingeverest.com,https://codingeverest.com,https://summit.codingeverest.com' >> .env",
    "fi",
    "echo ''",
    "echo 'Step 3: Verify update'",
    "grep CORS_ORIGIN .env",
    "echo ''",
    "echo 'Step 4: Restart server with PM2'",
    "export HOME=/root",
    "pm2 restart summit",
    "sleep 3",
    "pm2 list",
    "echo ''",
    "echo 'âœ… CORS updated and server restarted'"
  ]
}

