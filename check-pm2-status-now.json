{
  "InstanceIds": ["i-0fba58db502cc8d39"],
  "DocumentName": "AWS-RunShellScript",
  "Parameters": {
    "commands": [
      "cd /var/www/summit/server",
      "echo '=== PM2 Status ==='",
      "pm2 list",
      "echo ''",
      "echo '=== Port 3000 Status ==='",
      "lsof -i:3000 || echo 'Nothing listening on port 3000'",
      "echo ''",
      "echo '=== Recent Error Logs ==='",
      "pm2 logs summit-backend --err --lines 10 --nostream 2>&1 | tail -10",
      "echo ''",
      "echo '=== Testing Local Health ==='",
      "curl -s http://localhost:3000/health || echo 'Health check failed'"
    ]
  }
}

